
# 구조체

여러 자료형을 모아서 하나의 형식으로 기술한 것 

배열은 같은 것들이 모인  것

구조체는 서로 다른 것들이 모인 것이다 

> 인덱스 개념이 없다 

구조체 안에서 변수명을 준다 그게 바로

*멤버*

> 구조체를 이루는 요소

멤버 접근연산자가 . 이다 

*typedef* 선언을 동반하는 게 일상적이다 

그래야 main에서 struct ~ 이렇게 안써도 된다 

그래서 구조체 가지고 단위데이터를 쓰기 편하다 

구조체 가지고 인스턴스 만들어서 멤버변수를 초기화하면
그게 하나의 레코드가 되는 것 

자바에서는 이제 클래스라고도 부른다 

# 메모리 동적할당

- 구조체 배열 가능
- 포인터도 가능
- 반환형이나 매개변수도 가능
	- 하지만 생각 잘해야된다 
	- 그냥 포인터로 쓰는게 맞다

> 주로 쓰일 때

*malloc()* 하고 자주 쓰인다 

> [!c] malloc()
> void *  로 주소를 반환해주기에 앞에 강제 형 변환을 해줘야 된다.
> (int * ) malloc(sizeof(data));

더 큰 메모리가 잡힐수도있다

## 매개변수 반환자료 더 딥 

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
typedef struct USER {
	int age;
	char name[32];
	char phone[32];
}USER;

void GetUser(USER* param) {
	USER user = {
		10,"ksy","01023809371"
	};
	//memcpy(param,&user,sizeof(user));
	*param = user;
	return;
}
int main(void) {
	USER a;
	GetUser(&a);

	printf("%d 살 %s이름 %s폰번호", a.age, a.name, a.phone);
	return 0;
}
```

이렇게 구조체를 매개변수로 할때는 포인터로 해주고 

memcpy하거나 지정해주면 된다

# 구조체를 멤버로 가지는 구조체

> 이 경우 선언의 순서가 중요

## 자기 참조 구조체 

자기 자신에 대한 포인터를 멤버로 갖는 것 

> 연결 리스트 



# . 와 -> 차이 

	도트는 멤버를 직접 가고 
	화살표는 간접으로 가는것 인데

도트는 멤버변수 직접 사용해서 접근시

화살표는 구조체변수를 사용해서 접근시 이용된다

# 필수 실습문제

## 자기 참조 구조체와 재귀호출 

연결리스트 전체의 내용을 출력하는 함수를 작성하시오.
함수의 매개변수로는 출력할 노드의 주소를 받고 재귀호출을 통해서 다음 노드로 이동하도록 구현 

# 비트 필드

특수한 구조체 
1 바이트를 정보를 쉽게 잘라 쓰기 위한 문법 

멤버 선언시 기술한 멤버는 8비트의 오른쪽 부터 적용 

![[Pasted image 20240318155020.png]]


# 공용체


배열 , 구조체 ,공용체

배열이나 구조체는 멤버가 증가하면 공간이 증가한다

공용체는 고정메모리 크기 

32비트 정수에 대해서 integer 하나라고 생각가능
하지만 short 2개 char 4개 가능 

> ip주소가 32비트 

그래서 공용체로 끊어서 표현하는 것 

192.168.0.1

바로 모든 멤버 변수가 하나의 메모리 공간을 공유한다는 점만이 다릅니다.

![[Pasted image 20240318155709.png]]

```c
typedef union

{

    unsigned char a;

    unsigned short b;

    unsigned int c;

} SHAREDATA;

int main(void)

{

    SHAREDATA var;

    var.c = 0x12345678;  

    printf("%x\n", var.a);

    printf("%x\n", var.b);

    printf("%x\n", var.c);

    return 0;
```

이러면 가장큰 int로 잡힌다 메모리 공간이 

# 구조체 멤버 맞춤

구조체를 이루는 멤버의 메모리 공간은 관리 편의를 위해서 완전 연접하지 않고 일정단위로 메모리 구성

완전히 연접할 경우 *전처리기 사용*


