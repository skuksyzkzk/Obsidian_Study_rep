# balnceOf 
```jsx
function balanceOf(address owner) public view virtual returns (uint256) {

        if (owner == address(0)) {

            revert ERC721InvalidOwner(address(0));

        }

        return _balances[owner];

    }
```
> 해당 주소의 오너의 nft 갯수를 리턴한다

# ownerOf
```jsx
function ownerOf(uint256 tokenId) public view virtual returns (address) {

        return _requireOwned(tokenId);

    }
function _requireOwned(uint256 tokenId) internal view returns (address) {

        address owner = _ownerOf(tokenId);

        if (owner == address(0)) {

            revert ERC721NonexistentToken(tokenId);

        }

        return owner;

    }
function _ownerOf(uint256 tokenId) internal view virtual returns (address) {

        return _owners[tokenId];

    }
```

>requiredOwned에서 tokenid로 민트가 안되었거나 버닝 해버린거 인지 확인하고 revert한다 
>또한 owner가 제로인지 확인하고 오너를 리턴해준다 
>


# tokenUrl

``` jsx
function tokenURI(uint256 tokenId) public view virtual returns (string memory) {

        _requireOwned(tokenId);

  

        string memory baseURI = _baseURI();

        return bytes(baseURI).length > 0 ? string.concat(baseURI, tokenId.toString()) : "";

    }

  

    /**

     * @dev Base URI for computing {tokenURI}. If set, the resulting URI for each

     * token will be the concatenation of the `baseURI` and the `tokenId`. Empty

     * by default, can be overridden in child contracts.

        실제 사용시에는 적절한 주소에 리턴해줘야된다.

          */

    function _baseURI() internal view virtual returns (string memory) {

        return "";

    }
```

> basurl로 지정해 놓은 값에 tokenid를 붙여서 리턴해준다 


# approved 
내가 가지고 있는 어떤 하나의 토큰을 특정 누군가에게 허용 해준다.
```jsx

 function approve(address to, uint256 tokenId) public virtual {

        _approve(to, tokenId, _msgSender());

    }
   
```
# setApprovalForAll

이것은 내가 가지고 있는 **모든** 토큰에 관한 것을 누구에게 허용해주는 것 

# Why 허용이 필요한 것?

## 자신이 소유한 NFT를 컨트랙트에게 허용을 해줘야지만 거래가 가능하기에 

> opensea등 nft마켓에서 사용자들 간 p2p 거래를 지원하기 위해서는 승인이 필요하다 

>[!example]
>만약 내가 opensea에 NFT를 올리면 구매자가 1 eth를 지불하고 opensea는 나에게 1 eth를 보내주고 구매자에게 NFT를 판매하여 전달한다.
>그렇기에 우리는 opensea에게 Approved 해줘야한다.

# transferFrom Vs safetransferfrom

보통 safeTransfer을 더 선호 이게 콜백함수가 있어서 더 안전하다 