
# 0. input value 

처음으로 input으로 이름을 받아와서 로그인 버튼을 누르면 로그인되게 한다.

> [!warning] 문제점 
> 로그인 버튼을 눌렀을 때 단순히 input.value값으로 값을 불러오면 value값이 없어도 값이 들어가서 로그인 버튼이 눌리게 된다 

```javascript
const loginInput = document.querySelector("#login-form input");

const loginBtn = document.querySelector("#login-form button");

  

function handleLoginBtn() {

    console.log(`hello ${loginInput.value}`);

}

  

loginBtn.addEventListener('click',handleLoginBtn);
```
> 이게 초기 단계 여기에 value값이 너무 길거나 아예 아무것도 없을 경우를 IF-Else 문으로 해결 

```javascript

function handleLoginBtn() {

    const value = loginInput.value;

    if(value === '') alert("Please write your name");

    else if (value.length >15) alert("Your name is too long");

}

```

> 이렇게 하는 것은 js 자체로 사용해서 괜찮긴 하지만 이미 브라우저에서 제공하는 걸로 해도 충분하다. 여전히 유효성 검사는 중요하다 user를 믿지마라 

# 1. Form submission

input에서 자체적으로 제공하는 required maxlength를 이용해서 유효성검사
그러나 이거를 하려면 form으로 감싸야지 가능하다 
```html
<form id="login-form">

        <input required maxlength="15" type="text" 
        placeholder="What is your name?">

        <button>Log In</button>

    </form>
```

![[Pasted image 20240112174404.png]]

그러면 이렇게 자동으로 브라우저에서 기능을 제공해주기에 편함 
길이제한도 15이상 입력이 안되게 막아준다.

### 근데 이러면 웹사이트가 재시작된다

form이 submit 해서 그런 것
이러면 따로 click 이벤트를 처리 할 필요가 없는 것 엔터눌러도 submit되기에 

그러나 우리는 브라우저가 새로고침 되지않고 user 정보를 저장하도록 하고싶은 것 

> [!question] 어떻게 submit 되는 걸 막을 것인가.

# 2. Event

submit event 발생을 파악해야된다 .
새로고침도 막아야한다.

> Login Form에 이벤트 추가 해야된다 .submit listener 

() 라는 함수 실행을 보면 브라우저는 바로 실행을 해버림 

> 	loginForm.addEventListener('submit',onLoginSubmit); 

이 라인에서 submit 이벤트가 발생하면 브라우저는 onLoginSubmit함수를 호출하는데 
첫번째 인자로 어떠한 정보를 가진채 호출한다 

즉 단순히 onLoginSubmit() 이렇게 호출하는 것이 아닌 
onLoginSubmit(information) 이렇게 인자로서 필요로 할만한 정보들을 주고 있다 .

첫번째 인자는 항상 지금 막 벌어진 일들에 대한 정보가 된다.

```js
const loginInput = document.querySelector("#login-form input");

const loginForm = document.querySelector("#login-form");

  

function onLoginSubmit(event) {

    event.preventDefault();

    console.log(event);

}

  

loginForm.addEventListener('submit',onLoginSubmit);

//loginBtn.addEventListener('click',handleLoginBtn);
```



## event.preventDefault();
> 어떤 event의 기본 행동이든지 발생되지 않도록 막는 역할을 수행  
> 예를 들어서 submit 이벤트후에 새로고침을 하는 것 같은 행위를 막는 것 
> 브라우저의 기본 동작을 막아준다.

> [!warning ] [[이벤트 버블링]] 
> preventDefault() 버블링을 직접적으로 막지않는다 

### 링크의 기본동작은 다른 페이지로 이동하는 것 

> alert 도 사용하지말자 prompt처럼 
> 

# 3. Getting USerName 

form으로 유저이름하고 정보를 입력 받은 그 폼을 화면에서 안보이게 하고 싶으면 
아예 지우는 방법도 있지만 hidden으로 숨겨주는 방법도 있다 .

# 4. Saving User Name

local storage에 저장한다. [[local storage , session storage]]

local storage에 존재하면 표시하지 않고 존재하지 않으면 표시한다.


# 5. Loading user name 

```js
const loginInput = document.querySelector("#login-form input");

const loginForm = document.querySelector("#login-form");

const greeting = document.querySelector("#greeting");

const HIDDEN_CLASSNAME = "hidden";

const USERNAME_KEY = "username";

function onLoginSubmit(event) {

    event.preventDefault();

    const username = loginInput.value;

    loginForm.classList.add(HIDDEN_CLASSNAME);

    localStorage.setItem(USERNAME_KEY,username);

    printGreeting(username);

}

function printGreeting(username) {

    greeting.innerText = `Hello ${username}`;

    greeting.classList.remove(HIDDEN_CLASSNAME);

}

//loginBtn.addEventListener('click',handleLoginBtn);

  

const savedUsername = localStorage.getItem(USERNAME_KEY);

  

if (savedUsername === null)  {

    loginForm.classList.remove(HIDDEN_CLASSNAME);

    loginForm.addEventListener('submit',onLoginSubmit);

}else {

    printGreeting(savedUsername);

}
```

2번 이상 반복사용하는 string은 상수로 대문자로 선언해주는게 좋다 
또한 반복해서 사용하는 코드는 함수로 선언하자 