
# AMM 

## Constant  Sum Market Maker  ( CSMM )
x+y = k


##  Constant Product Market Makers (CPMM) 
#### 유니스왑이 채택한 방식

1.  x  y = k 스왑 후에도 k의 값을 변화하지 않는다.
2. 스왑후 (x+ #x) ( y - #y) = k #x 는 input 토큰갯수 #y 는 output 토큰 갯수
3. 그러므로  (x+ #x) ( y - #y) = x y 가 된다
4. input값인 #x 는 사용자가 입력한 값으로 정해져 있고 ,output값인 #y 를 구하는게 핵심 
5. 최종적으로 구해지는 #y 값은 

> [!info] ### #y = y #x / x + #x

## 기대값과 실제값의 차이 
![[Pasted image 20240104174528.png]]

### 이유 : 슬리피지 

## 슬리피지 
![[Pasted image 20240104174731.png]]

•슬리피지는 스왑을 통해 받게 되는 기대 토큰 개수와 실제 받는 토큰 개수와의 차이이다. 
•CPMM에서는 풀에 존재하는 토큰의 양에 따라 받게 되는 토큰의 양이 정해지므로 필연적으로 발생 할 수 밖에 없다. 
•풀에 존재하는 토큰은 0이 되지 않는다. 즉 유동성은 고갈되지 않는다. 
•이것이 가능한 것도 슬리피지가 있기 때문이다. 
•같은 가격이어도 유동성 양에 따라서 슬리피지는 달라진다. - 유동성이 클수록(k값이 클수록) 슬리피지는 작아진다. 
•적은 양을 교환하는 것이 슬리피지를 줄일 수 있다. 
•디파이 서비스들은 슬리피지를 줄이기 위해 유동성을 최대한 끌어모으려고 한다.

#### 추가설명은 [[슬리피지]]


# Impermanent Lose(영구적 손실)

> 좋은 참고 블로그 https://medium.com/@konverter/koverter-impermanent-loss-3a3de65fb55c

### 유동성을 공급을 하지 않고 그냥 가지고 있는 것과 유동성 공급 후 다시 회수 하였을 때 받게 되는 토큰의 개수 변화에 발생하는 가치 변화 

![[Pasted image 20240104190753.png]]
![[Pasted image 20240104190802.png]]

### 이번 테스트에서 3000달러 손해 발생함,하지만 유동성을 제거 할 때 두 토큰의 비율이 같아질 때 까지 기다렸다면 손해는 안 발생했을 것 이 이외에도 ETH나 GRAY토큰의 가격변동으로 인해서도 손실을 보거나 이득을 볼 수 있을 것이다. 실제로 비율이 무너지면 그 비율로 인한 차익거래를 통해서 이득을 보는 차익거래자들이 존재함, 차익거래자들의 역할이 중요한 것 그래서 
[[차익 거래자]]  < - 이거 참고하자 왜 중요한지 
[[이자 농사 (Farming)]] <- 이것도 같이보면 좋다 왜 유동성을 공급하는지? 수수료 때문이라는 것

## 파라메타 검증
