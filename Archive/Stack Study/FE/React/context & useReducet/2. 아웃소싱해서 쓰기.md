
하나의 앱에 여러가지 컨텍스트를 사용할수있기에 
다른 상태값을 다른 컨텍스트를 공유 하게 될 수도있다 

그러면 app에 엄청난 로직이 쌓인다 

기존 app에 있는 해당 컨텍스트와 관련된 상태와 상태를 업데이트하는 함수를 
store 폴더의 해당 컨텍스트 파일에 넣는다 그리고 아웃소싱해서 사용한다 
이렇게하면 app컴포넌트에 로직이 쌓이지 않고 훨씬 가볍게 할 수 있다 .

```JSX
import Header from './components/Header.jsx';

import Shop from './components/Shop.jsx';

  

import CartContextProvider  from './stroe/shopping-cart-context.jsx';

  
  

function App() {

  

  return (

    <CartContextProvider>

      <Header/>

      <Shop />

    </CartContextProvider>

  );

}

  

export default App;
```

```jsx
import { createContext,useState } from "react";

import { DUMMY_PRODUCTS } from "../dummy-products";

export const CartContext = createContext({

    items: [],

    addItemToCart : () => {},

    updateItemQuantity: () => {},

});

  

export default function CartContextProvider( {children}) {

    const [shoppingCart, setShoppingCart] = useState({

        items: [],

      });

      function handleAddItemToCart(id) {

        setShoppingCart((prevShoppingCart) => {

          const updatedItems = [...prevShoppingCart.items];

          const existingCartItemIndex = updatedItems.findIndex(

            (cartItem) => cartItem.id === id

          );

          const existingCartItem = updatedItems[existingCartItemIndex];

          if (existingCartItem) {

            const updatedItem = {

              ...existingCartItem,

              quantity: existingCartItem.quantity + 1,

            };

            updatedItems[existingCartItemIndex] = updatedItem;

          } else {

            const product = DUMMY_PRODUCTS.find((product) => product.id === id);

            updatedItems.push({

              id: id,

              name: product.title,

              price: product.price,

              quantity: 1,

            });

          }

          return {

            items: updatedItems,

          };

        });

      }

      function handleUpdateCartItemQuantity(productId, amount) {

        setShoppingCart((prevShoppingCart) => {

          const updatedItems = [...prevShoppingCart.items];

          const updatedItemIndex = updatedItems.findIndex(

            (item) => item.id === productId

          );

          const updatedItem = {

            ...updatedItems[updatedItemIndex],

          };

          updatedItem.quantity += amount;

          if (updatedItem.quantity <= 0) {

            updatedItems.splice(updatedItemIndex, 1);

          } else {

            updatedItems[updatedItemIndex] = updatedItem;

          }

          return {

            items: updatedItems,

          };

        });

      }

      const ctxValue = {

        items : shoppingCart.items,

        addItemToCart : handleAddItemToCart,

        updateItemQuantity : handleUpdateCartItemQuantity,

      };

    return (

        <CartContext.Provider value={ctxValue}>

            {children}

        </CartContext.Provider>

    )

};
```