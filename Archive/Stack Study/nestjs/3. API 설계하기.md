
# 게시판 만들기
> 주요기능

- 게시글 작성
- 게시글 가져오기
- 게시글 수정
- 게시글 삭제
- 회원가입
- 로그인


# node js,yarn 설치 

https://kdydesign.github.io/2020/09/16/nvm-for-windows/

node js 버전 관리 를 위해서 nvm-windows를 설치해서 버전을 18.14.2로 변경해주었다
위에 블로그에 자세히 설명 나와 있다

# 1. controller 생성 및 샘플 api 구현 

```ts
import { Controller, Get } from '@nestjs/common';

import { AppService } from './app.service';

  

@Controller()

export class AppController {

  constructor(private readonly appService: AppService) {}

  

  @Get()

  getHello(): string {

    return this.appService.getHello();

  }

}
```

기본주소로 연결되어있는것 

localhost:3000 으로 

# router parameters ,쿼리 스트링 

## @Param()

파라메터를 받는 것 

```ts
import { Controller, Get, Param } from '@nestjs/common';

import { AppService } from './app.service';

  

@Controller()

export class AppController {

  constructor(private readonly appService: AppService) {}

  

  @Get()

  getHello(): string {

    return this.appService.getHello();

  }

  

  @Get('name/:name')

  getName(

    @Param('name') name: string

  ): string {

    return `${name} hello`;

  }

  

}
```

## 쿼리스트링 @Query

# 쿼리 스트링이 뭔데 ?

개념을 간단하게 설명하면,

쿼리스트링은 사용자가 입력 데이터를 전달하는 방법 중의 하나로, **url 주소에** 미리 협의된 데이터를 **파라미터를 통해 넘기는 것**을 말한다.

  
위와 같이 쿼리 스트링은 URL에서 **? 다음에 오는** 내용이다. 

이름을 해석하면 간단한데 Query(**질문**) String(**문자열**) 즉, **? 뒤에 나오는 문자열**이라는 뜻.

**2. Query String의 구조**

(예시)

> /path?키1=값1&키2=값2&키3=값3

위와 같이 쿼리스트링은 **key=value** 형식으로 구성되어있고, 여러 개를 사용하려면 '&'을 사용하면 된다.

위의 예시는 3개의 쿼리스트링을 보내고 있다



쿼리에 어떤 타입이 올지 미리 정해놔야된다

# nest js 이름 컨벤션

파일명은 어떻게하나 
kebab-case 사용한다 


# 2. routing 만들기

```ts
import { Controller,Get, Param, Post, Put ,Body, Delete} from '@nestjs/common';

  

@Controller('board')

export class BoardController {

    // board 조회

    @Get()

    findAll(){

        return 'findAll';

    }

    @Get(':id')

    find(

        @Param('id') id: number

    ){

        return `find id: ${id}`;

    }

    //생성

    @Post()

    create(

        @Body() data

    ) {

        return 'create';

    }

  

    @Put(':id')

    update(

        @Param('id') id:number,

        @Body() data

    ){

        return 'update';

    }

  

    @Delete(':id')

    remove(

        @Param('id') id: number

    ){

        return "delete";

    }

  

}
```

# module 작성board모듈

> nest g mo 이름 하면된다

```ts
import { Module } from '@nestjs/common';

import { BoardService } from './board.service';

import { BoardController } from './board.controller';

  

@Module({

  controllers: [BoardController],

  providers: [BoardService]

})

export class BoardModule {}
```
이러면
app.modules에서 그냥 BoardModule만 임포트해서쓰면 된다

# 컨트롤러에서 service 주입 

```ts
import { Injectable } from '@nestjs/common';

  

@Injectable()

export class BoardService {

    findAll(){

        return 'findALl';

    }

}
```

```ts
constructor(

        private readonly boardService: BoardService

    ){}

    // board 조회

    @Get()

    findAll(){

        return this.boardService.findAll();

    }
```


# 구현 

## 1 . 게시글 가져오기 구현 

이미 작성된 게시글 가져오기 
더미 데이터를 넣어 놓기 
DB가 없으니까 
```js

// board 조회

    @Get()

    findAll(){

        return this.boardService.findAll();

    }

    @Get(':id')

    find(

        @Param('id') id: string

    ){

        return this.boardService.find(id);

    }
   
   
   
   import { Injectable } from '@nestjs/common';

  

@Injectable()

export class BoardService {

    private boards = [

        {

            id: '1',

            name: 'kim',

            content: 'content 1',

        },

        {

            id: '2',

            name: 'kim2',

            content: 'content 2',

        },

        {

            id: '3',

            name: 'kim3',

            content: 'content 3',

        },

        {

            id: '4',

            name: 'kim4',

            content: 'content 4',

        },

        {

            id: '5',

            name: 'kim5',

            content: 'content5',

        },

        {

            id: '6',

            name: 'kim6',

            content: 'content 6',

        },

    ]

    findAll(){

        return this.boards;

    }

  

    find(id: string) {

        const index = this.boards.findIndex(board => board.id === id);

        console.log(index);

  

        return this.boards[index];

    }

}
```

## 2. 게시글 작성
```ts

@Post()

    create(

        @Body() data

    ) {

        return this.boardService.create(data);

    }




=---------

 create(data) {

        const newBoard = { id:this.getNextId(),...data};

        this.boards.push(newBoard);

        return newBoard;

    }

  

    getNextId() {

        return this.boards.sort((a,b) => (b.id -a.id))[0].id +1 ;

    }
```

## 3. 게시글 업데이트 구현


```ts

	    update(id:number,data) {

        const index = this.getBoardId(id);

        if(index > -1) {

            this.boards[index] = {

                ...this.boards[index],

                ...data,

            };

            return this.boards[index];

        }

        return null;

    }
```


## 4. 게시글 삭제

```ts

 delete(id: number){

        const index = this.getBoardId(id);

        if(index > -1) {

            const deleteBoard = this.boards[index];

            this.boards.splice(index,1);

            return deleteBoard;

        }

        return null;

    }
```

# API 문서화 swagger


api를 직관적으로 문서화 시키게해준다
https://docs.nestjs.com/openapi/introduction